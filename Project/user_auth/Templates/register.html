<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Registration</title>
    <link rel="stylesheet" href="../static/css/profile.css">
</head>
<body>
    <div>
        <img src="../static/image/logo.png">
    </div>
    <div class="nav">
        <a href="{% url 'home' %}"><div>Home</div></a>
      <div>About</div>
      <a href="{% url 'financial-details' %}"> <div>Mini-Questionare</div></a>
        <a href="{% url 'financial_data_screener' %}"><div> Investors Query</div></a>
    <div class="main">
        <h1 class="profil">Profile</h1>

        <form action="{% url 'register' %}" method="post" enctype="multipart/form-data" onsubmit="submitForm(event)">
            {% csrf_token %}
            <div class="forma">
                <h2 class="Sdetails">Signup Details</h2>
                <label>Username</label><br>
                <input type="text" placeholder="Username" name="username" id="username" required><br>
                <label>Email</label> <br>
                <input type="email" placeholder="Enter your mail" name="email" id="email" ><br>
                <label>Password</label><br>
                <input type="password" placeholder="Password" id="password" name="password"
                pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" required><br>
                <label>Confirm Password</label><br>
                <input type="password" placeholder="Confirm Password" id="confirmPassword" name="confirmPassword"
                pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" required><br>

                <h2 class="Sdetails">StartUp Details</h2>
                <label>Company Name</label><br>
                <input type="text" placeholder="Startup Name" name="startup_name" id="startup_name" required><br>
                <label>Website</label> <br>
                <input type="text" placeholder="Website Url" name="website" id="website" ><br>
                <label>Introductory Video</label><br>
                <input type="text" placeholder="Introductory Video" name="introductory_video" id="introductory_video" ><br>

                <h2 class="Sdetails">Co-Founder Details</h2>

                <!-- Co-founder table -->
                <table class="co-founder-table" id="co-founder-table">
                    <caption>Co-Founders</caption>
                    <thead>
                        <tr>
                            <th>Co-founder Name</th>
                            <th>LinkedIn Profile</th>
                            <th>Introduction</th>
                            <th>Profile Photo</th>
                            <th>Email</th>
                            <th>Phone Number</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Initial co-founder input fields -->
                        <tr>
                            <td><input type="text" placeholder="Name" name="co_founder" required></td>
                            <td><input type="url" placeholder="Linked Url" name="linkedin_profile" required></td>
                            <td><input type="text" placeholder="Introduction" name="introduction" required></td>
                            <td><input type="file" name="profile_photo" accept="image/*" required></td>
                            <td><input type="email" placeholder="Email" name="cofounder_email" required></td>
                            <td><input type="text" placeholder="Enter PhoneNumber" name="phone_number" pattern="[0-9]{10}" title="Please enter a 10-digit number" required></td>
                        </tr>
                    </tbody>
                </table>
                <div class="buttons">
                    <button type="submit">Submit</button>
                    <button type="button" onclick="addCoFounder()">+</button>
                </div>
            </div>
        </form>

        <script src="../static/javascript/script.js"></script>
<script>
    function addCoFounder() {
                var table = document.getElementById("co-founder-table").getElementsByTagName('tbody')[0];
                var newRow = table.insertRow(table.rows.length);
                var cell1 = newRow.insertCell(0);
                var cell2 = newRow.insertCell(1);
                var cell3 = newRow.insertCell(2);
                var cell4 = newRow.insertCell(3);
                var cell5 = newRow.insertCell(4);
                var cell6 = newRow.insertCell(5);

                cell1.innerHTML = '<input type="text" placeholder="Name" name="co_founder" required>';
                cell2.innerHTML = '<input type="url" placeholder="Linked Url" name="linkedin_profile" required>';
                cell3.innerHTML = '<input type="text" placeholder="Introduction" name="introduction" required>';
                cell4.innerHTML = '<input type="file" name="profile_photo" accept="image/*" required>';
                cell5.innerHTML = '<input type="email" placeholder="Email" name="cofounder_email" required>';
                cell6.innerHTML = '<input type="text" placeholder="Enter PhoneNumber" name="phone_number" pattern="[0-9]{10}" title="Please enter a 10-digit number" required>';
            }

            function submitForm(event) {
                event.preventDefault(); // Prevent the default form submission

                // Get form elements
                const username = document.getElementById('username').value;
                const email = document.getElementById('email').value;
                const password = document.getElementById('password').value;
                const confirmPassword = document.getElementById('confirmPassword').value;
                const startup_name = document.getElementById('startup_name').value;
                const url = document.getElementById('website').value; // Corrected ID
                const video = document.getElementById('introductory_video').value; // Corrected ID

                // Check if passwords match
                if (password !== confirmPassword) {
                    alert('Passwords do not match');
                    return;
                }

                // Create a JavaScript object with the form data
                const formData = {
                    signupDetails: {
                        username: username,
                        email: email,
                        password: password,
                        confirmPassword: confirmPassword
                    },
                    startupDetails: {
                        companyName: startup_name,
                        website: url,
                        introductoryVideo: video
                    },
                    coFounderDetails: getCoFounderDetails() // Function to get co-founder details
                };

                // Your fetch code here...
                // ...

                // You can now use the 'formData' object as needed, for example, send it to a server or store it locally.
                console.log(formData);
            }

            function getCoFounderDetails() {
                // Get co-founder table and rows
                const coFounderTable = document.getElementById('co-founder-table');
                const rows = coFounderTable.getElementsByTagName('tr');
                const coFounders = [];

                // Loop through rows (skip the first one as it contains headers)
                for (let i = 1; i < rows.length; i++) {
                    const row = rows[i];
                    const inputs = row.getElementsByTagName('input');

                    // Create co-founder object and add it to the array
                    const coFounder = {
                        name: inputs[0].value,
                        linkedIn: inputs[1].value,
                        introduction: inputs[2].value,
                        photo: inputs[3].value,
                        email: inputs[4].value,
                        phoneNumber: inputs[5].value
                    };

                    coFounders.push(coFounder);
                }

                return coFounders;
            }
</script>
    </div>
</body>
</html>
